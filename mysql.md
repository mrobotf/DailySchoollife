## 数据库基本操作
* 登录 `mysql -h localhost -u root -p`.  -h 后主机的服务地址，客户端和服务器在同一台机器上，所以输入 localhost 或者 IP 地址；-u 后面跟登录数据库的用户名称，在这里为 root；-p 后面是用户登录密码。

`CREATE DATABASE database_name;` 创建数据库

`SHOW TABLES;` 显示所有表

`CREATE DATABASE [IF NOT EXISTS] <数据库名>` [] 内容可去除

`ALTER DATABASE [数据库名] {`
    `[ DEFAULT ] CHARACTER SET <字符集名> |`
`   [ DEFAULT ] COLLATE <校对规则名>}` 修改已经被创建或者存在的数据库的相关参数. MySQL 的字符集（CHARACTER）和校对规则（COLLATION）是两个不同的概念。字符集是用来定义 MySQL 存储字符串的方式，校对规则定义了比较字符串的方式。

`DROP DATABASE [ IF EXISTS ] <数据库名>` 删除数据库

`USE <数据库名>` 指定当前数据库

`#注释内容`   `-- 注释内容`  SQL 语句的单行注释，`/* */` 多行注释 

**数据库名、表名和字段名，都不允许出现任何大写字母，避免节外生枝。**

`HELP '查询内容'` 查询数据库内的文档

## 数据库设计
1. 需求分析
2. 概要设计  通过综合、归纳与抽象用户需求，形成一个具体 DBMS 的概念模型，也就是绘制数据库的 E-R 图
3. 逻辑结构设计   E-R 图转换为多张表，进行逻辑设计，确认各表的主外键，并应用数据库设计的三大范式进行审核，对其优化
4. 物理设计阶段   选择具体的数据库（如 MySQL 或 Oracle 等）进行物理实现
5. 数据库实施阶段   运用 DBMS 提供的数据语言（例如 SQL）、工具及宿主语言（例如 Java），根据逻辑设计和物理设计的结果建立数据库，编制与调试应用程序，组织数据入库，并进行试运行
6. 数据库运行和维护阶段   数据库应用系统经过试运行后即可投入正式运行。在运行过程中必须不断地对其进行评价、调整与修改

Visio 绘制 E-R 图

## MySQL 数据类型和存储引擎
整数类型、浮点数类型和定点数类型、日期和时间类型、字符串类型、二进制类型等
> 整数类型和浮点数类型可以统称为数值数据类型。
1. 数值类型
整数类型
    类型名称	        说明	    存储需求
    TINYINT	        很小的整数	    1个字节
    SMALLINT	    小的整数	    2个宇节
    MEDIUMINT   	中等大小的整数	 3个字节
    INT(INTEGHR)	普通大小的整数	 4个字节
    BIGINT	        大整数	        8个字节

    类型名称        	说明	                                 存储需求
    TINYINT	        -128〜127	                                0 〜255
    SMALLINT	    -32768〜32767	                            0〜65535
    MEDIUMINT	    -8388608〜8388607	                        0〜16777215
    INT(INTEGER)	-2147483648〜2147483647	                    0〜4294967295
    BIGINT	        -9223372036854775808〜9223372036854775807	0〜18446744073709551615

浮点数
单精度浮点数(FLOAT)和双精度浮点数(DOUBLE), 定点类型只有一种，就是 DECIMAL

浮点类型和定点类型都可以用(M, D)来表示，其中M称为精度，表示总共的位数；D称为标度，表示小数的位数， M(1～255), D(1～30，且不能大于 M-2)

FLOAT 类型的取值范围如下：
有符号的取值范围：-3.402823466E+38～-1.175494351E-38。
无符号的取值范围：0 和 -1.175494351E-38～-3.402823466E+38。

DOUBLE 类型的取值范围如下：
有符号的取值范围：-1.7976931348623157E+308～-2.2250738585072014E-308。
无符号的取值范围：0 和 -2.2250738585072014E-308～-1.7976931348623157E+308。
> 在 MySQL 中，定点数以字符串形式存储，在对精度要求比较高的时候（如货币、科学数据），使用 DECIMAL 的类型比较好，另外两个浮点数进行减法和比较运算时也容易出问题，所以在使用浮点数时需要注意，并尽量避免做浮点数比较。

2. 日期/时间类型
包括 YEAR、TIME、DATE、DATETIME 和 TIMESTAMP。

3. 字符串类型
类型名称	    说明	存储需求
CHAR(M)	    固定长度非二进制字符串	M 字节，1<=M<=255
VARCHAR(M)	变长非二进制字符串	L+1字节，在此，L< = M和 1<=M<=255
TINYTEXT	非常小的非二进制字符串	L+1字节，在此，L<2^8
TEXT	    小的非二进制字符串	L+2字节，在此，L<2^16
MEDIUMTEXT	中等大小的非二进制字符串	L+3字节，在此，L<2^24
LONGTEXT	大的非二进制字符串	L+4字节，在此，L<2^32
ENUM	    枚举类型，只能有一个枚举字符串值	1或2个字节，取决于枚举值的数目 (最大值为65535)
SET	        一个设置，字符串对象可以有零个或 多个SET成员	1、2、3、4或8个字节，取决于集合 成员的数量（最多64个成员）

M 为指定长度，VARCHAR 和 TEXT 类型是变长类型，其存储需求取决于列值的实际长度

TEXT 列保存非二进制字符串，如文章内容、评论等。当保存或查询 TEXT 列的值时，不删除尾部空格

`<字段名> ENUM( '值1', '值1', …, '值n' )` ENUM 
4. 二进制类型
包括 BIT、BINARY、VARBINARY、TINYBLOB、BLOB、MEDIUMBLOB 和 LONGBLOB。


## MySQL 数据表的操作
`CREATE TABLE <表名> ([表定义选项])[表选项][分区选项];` 创建表, `<列名1> <类型1> [,…] <列名n> <类型n>` 表定义选项。必须指定 
> 数据表中每个列（字段）的名称和数据类型，如果创建多个列，要用逗号隔开。和表名

`desc  table_name;` 显示表结构
* Null：表示该列是否可以存储 NULL 值。
* Key：表示该列是否已编制索引。PRI 表示该列是表主键的一部分，UNI 表示该列是 UNIQUE 索引的一部分，MUL 表示在列中某个给定值允许出现多次。
* Default：表示该列是否有默认值，如果有，值是多少。
* Extra：表示可以获取的与给定列有关的附加信息，如 AUTO_INCREMENT 等。

`SHOW CREATE TABLE <表名>;`  以SQL语句的形式展示表结构, 语句的结尾处（分号前面）添加\g或者\G参数可以改变展示形式。

> 当多行命令输入，发现错误后，用\c结束

## MySQL 用户管理
mysql 数据库中存储的都是用户权限表。用户登录以后，MySQL 会根据这些权限表的内容为每个用户赋予相应的权限。在 user 表里启用的所有权限都是全局级的，适用于所有数据库。
### user 表
* 用户列
  * 存储了用户连接 MySQL 数据库时需要输入的信息。需要注意的是 MySQL 5.7 版本不再使用 Password 来作为密码的字段，而改成了 authentication_string。
  * user 表中用户列 Host User authentication_string, 3 个字段同时匹配，MySQL 数据库系统才会允许其登录, 创建新用户时，也是设置这 3 个字段的值
  
* 权限列
  * 决定用户的权限，用来描述在全局范围内允许对数据和数据库进行的操作
  * 大致分为两大类，分别是高级管理权限和普通权限. 高级管理权限主要对数据库进行管理，例如关闭服务的权限、超级权限和加载用户等; 普通权限主要操作数据库，例如查询权限、修改权限等。
  * user 表的权限列包括 Select_priv、Insert_ priv 等以 priv 结尾的字段，这些字段值的数据类型为 ENUM，可取的值只有 Y 和 N：Y 表示该用户有对应的权限，N 表示该用户没有对应的权限。从安全角度考虑，这些字段的默认值都为 N。
  
* 安全列
  * 判断用户是否能够登录成功
  
* 资源控制列
  * 限制用户使用的资源, 规定允许操作的次数

### db表
* 用户列
  * db 表用户列有 3 个字段，分别是 Host、User、Db，标识从某个主机连接某个用户对某个数据库的操作权限，这 3 个字段的组合构成了 db 表的主键。
* 权限列
  * db 表中的权限列和 user 表中的权限列大致相同，只是user 表中的权限是针对所有数据库的，而 db 表中的权限只针对指定的数据库。如果希望用户只对某个数据库有操作权限，可以先将 user 表中对应的权限设置为 N，然后在 db 表中设置对应数据库的操作权限。

### 创建用户
`CREATE USER <用户> [ IDENTIFIED BY [ PASSWORD ] 'password' ] [ ,用户 [ IDENTIFIED BY [ PASSWORD ] 'password' ]]`
*用户*：user_name'@'host_name, user_name是用户名，host_name为主机名, 即用户连接 MySQL 时所用主机的名字。如果在创建的过程中，只给出了用户名，而没指定主机名，那么主机名默认为“%”，表示一组主机，即对所有主机开放权限。
*IDENTIFIED BY子句*: 若该用户不设密码，可省略此子句
*PASSWORD 'password'*
PASSWORD 表示使用哈希值设置密码，该参数可选。如果密码是一个普通的字符串，则不需要使用 PASSWORD 关键字。'password' 表示用户登录时使用的密码，需要用单引号括起来。

可以使用 password() 函数获取密码的哈希值

`INSERT INTO mysql.user(Host, User,  authentication_string, ssl_cipher, x509_issuer, x509_subject) VALUES ('hostname', 'username', PASSWORD('password'), '', '', '');`   INSERT 语句将用户的信息添加到 mysql.user 表
> 由于 mysql 数据库的 user 表中，ssl_cipher、x509_issuer 和 x509_subject 这 3 个字段没有默认值，所以向 user 表插入新记录时，一定要设置这 3 个字段的值，否则 INSERT 语句将不能执行。

`FLUSH PRIVILEGES;` 让用户生效

`GRANT priv_type ON database.table TO user [IDENTIFIED BY [PASSWORD] 'password']`  便于授予用户权限

priv_type 参数表示新用户的权限；
database.table 参数表示新用户的权限范围，即只能在指定的数据库和表上使用自己的权限；
user 参数指定新用户的账号，由用户名和主机名构成；
IDENTIFIED BY 关键字用来设置密码；
password 参数表示新用户的密码。


新创建的用户拥有的权限很少，它们只能执行不需要权限的操作。如登录 MySQL、使用 SHOW 语句查询所有存储引擎和字符集的列表等。如果两个用户的用户名相同，但主机名不同，MySQL 会将它们视为两个用户，并允许为这两个用户分配不同的权限集合。

**“*.*” 表示所有数据库下的所有表**


## 大量数据操作
### 导入数据
**load data infile**
